#include "Rational.h"

namespace std {

Rational::Rational(int a, int b) {
	this->num = a;
	this->denom = b;
	simplfy();
}

Rational::~Rational() {
	// TODO Auto-generated destructor stub
}

int Rational::gcd(int a, int b){
	while(true){
		a = a % b;
		if (a == 0)
			return b;
		b= b % a;
		if (b == 0)
			return a;
	}
}

void Rational::simplfy(){
	if (num == 0 || denom == 0){
		num=0;
		denom=1;
	}
	else{
		int t = gcd(num,denom);
		num /= t;
		denom /=t;
	}
	if (denom < 0){
		num *=-1;
		denom *=-1;
	}
}


int Rational::getDenom() const {
	return denom;
}

void Rational::setDenom(int denom) {
	this->denom = denom;
	simplfy();
}

int Rational::getNum() const {
	return num;
}

void Rational::setNum(int num) {
	this->num = num;
	simplfy();
}

istream& operator>>(istream &in, Rational &r){
	char ch;
	in >> r.num >> ch >> r.denom;
	r.simplfy();
	return in;
}

ostream& operator<<(ostream &os, const Rational &r){
	os << r.num << '/' << r.denom;
	return os;
}



Rational operator+(const Rational &a, const Rational &b){
	return Rational(a.num*b.denom+a.denom*b.num, a.denom*b.denom);
}
Rational operator-(const Rational &a, const Rational &b){
	return Rational(a.num*b.denom-a.denom*b.num, a.denom*b.denom);
}
Rational operator*(const Rational &a, const Rational &b){
	return Rational(a.num*b.num, a.denom*b.denom);
}
Rational operator/(const Rational &a, const Rational &b){
	return Rational(a.num*b.denom, a.denom*b.num);
}


Rational&  Rational::operator=(const Rational &b){
	this->num = b.num;
	this->denom = b.denom;
	simplfy();
	return *this;
}

Rational& Rational::operator*=(const Rational &a){
	this->num *= a.num;
	this->denom *= a.denom;
	simplfy();
	return *this;
}
Rational& Rational::operator/=(const Rational &a){
	this->num *= a.denom;
	this->denom *= a.num;
	simplfy();
	return *this;
}
Rational& Rational::operator+=(const Rational &a){
	this->num = this->num * a.denom + this->denom*a.num;
	this->denom *= this->denom * a.denom;
	simplfy();
	return *this;
}
Rational& Rational::operator-=(const Rational &a){
	this->num = this->num * a.denom - this->denom*a.num;
	this->denom *= this->denom * a.denom;
	simplfy();
	return *this;

}

// logical operators

bool operator<(const Rational &a, const Rational &b){
	return (a.num*b.denom < a.denom*b.num);
}
bool operator<=(const Rational &a, const Rational &b){
	return (a.num*b.denom <= a.denom*b.num);
}
bool operator>=(const Rational &a, const Rational &b){
	return (a.num*b.denom >= a.denom*b.num);
}
bool operator>(const Rational &a, const Rational &b){
	return (a.num*b.denom > a.denom*b.num);
}
bool operator==(const Rational &a, const Rational &b){
	return (a.num*b.denom == a.denom*b.num);
}

bool operator!=(const Rational &a, const Rational &b){
	return (a.num*b.denom != a.denom*b.num);
}


} /* namespace std */
